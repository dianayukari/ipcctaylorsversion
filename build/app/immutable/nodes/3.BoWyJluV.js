import"../chunks/DsnmJJEf.js";import{i as ee}from"../chunks/DwySfQog.js";import{w as ae,x as te,y as se,z as oe,A as m,B as r,C as re,a as e,b as o,m as g,D as v,F as h,G as c,I as N,J as ne,K as I,L as q,M as W,N as O,O as C,P as le}from"../chunks/DS3f_Bk2.js";import{i as x}from"../chunks/BFjWWJtm.js";import{b as ie,e as ve,i as ce,h as me}from"../chunks/D31jsGsz.js";import{b as pe}from"../chunks/NfDPp4H-.js";var _e=m("<option> </option>"),fe=m("<option disabled selected>Select a song</option> <!>",1),de=m("<option> </option>"),ue=m('<p class="text"><span class="response-text svelte-1eaotym"><!></span></p>'),ge=m('<div class="answer svelte-1eaotym"><button class="answer-btn svelte-1eaotym">Show answer</button></div>'),he=m(`<div class="quiz-screen"><p class="other-text svelte-1eaotym">This is a "scientific version" of a Taylor's verse:</p> <p> </p> <p class="other-text svelte-1eaotym">What song is this?</p> <select class="select-song svelte-1eaotym"><!></select> <button class="try-again-btn svelte-1eaotym">Try another</button> <!></div>`),ye=m('<div class="result-screen svelte-1eaotym"><p class="result-text svelte-1eaotym">Yessss!</p> <img src="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExNmUybWRtOW1mam04Y3BxM3pjZzRnc2Zpb3RnOWQ2Y2twaHRncmdrMCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/Y3EIwTKTeL1rEyc2ZA/giphy.gif" alt="" width="380"/> <button class="try-again-btn end svelte-1eaotym">Try another</button></div>'),be=m(`<p class="result-text svelte-1eaotym">That's not quite right</p> <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExcndlbmwwNG92MDZoaWYyNDNhaDkyZ3R0anZiaGNqYTM5OXVuYTE3eCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/3otWpAMUG1n5CHSVtm/giphy.gif" alt="incorrect image" width="380"/>`,1),we=m('<div class="loading"><p>Loading quiz...</p></div>'),xe=m('<main class="svelte-1eaotym"><!> <!></main>');function We(Q,F){ae(F,!1);const R=g();let p=g([]),_=g(null),Z=g(),n=g(""),T=g(!0),y=g(!1);function j(){if(o(Z,!0),o(y,!1),e(p).length===0)return null;const a=Math.floor(Math.random()*e(p).length);return o(_,e(p)[a]),o(T,!0),o(n,""),e(_).transformed}function L(a){o(n,a.target.value),o(Z,e(_).song_title===e(n)),e(Z)&&(o(T,!1),o(n,""))}function P(){o(y,!0),o(n,e(_).song_title)}te(async()=>{try{const a=await fetch(`${pe}/tay_to_ipcc.json`);o(p,await a.json()),j()}catch(a){console.error("Failed to load quiz data:",a)}}),se(()=>e(p),()=>{o(R,e(p).length>0?[...new Set(e(p).map(a=>a.song_title||"Unknown Title"))]:[])}),oe(),ee();var z=xe(),E=v(z);{var U=a=>{var l=he(),d=h(v(l),2),D=v(d,!0);c(d);var u=h(d,4);N(()=>{e(n),ne(()=>{e(y),e(R)})});var f=v(u);{var b=s=>{var t=fe(),i=C(t);i.value=i.__value="";var w=h(i,2);ve(w,1,()=>e(R),ce,(K,G)=>{var Y=_e(),$=v(Y,!0);c(Y);var A={};N(()=>{I($,e(G)),A!==(A=e(G))&&(Y.value=(Y.__value=e(G))??"")}),r(K,Y)}),r(s,t)},S=s=>{var t=de(),i=v(t,!0);c(t);var w={};N(()=>{I(i,e(n)),w!==(w=e(n))&&(t.value=(t.__value=e(n))??"")}),r(s,t)};x(f,s=>{e(y)?s(S,!1):s(b)})}c(u);var k=h(u,2),M=h(k,2);{var V=s=>{var t=ue(),i=v(t),w=v(i);me(w,()=>(e(_),q(()=>e(_).item.replace(/\n/g,"<br>")))),c(i),c(t),r(s,t)},J=s=>{var t=ge(),i=v(t);c(t),W("click",i,P),r(s,t)};x(M,s=>{e(y)?s(V):s(J,!1)})}c(l),N(()=>I(D,(e(_),q(()=>e(_).transformed)))),W("change",u,L),ie(u,()=>e(n),s=>o(n,s)),W("click",k,j),r(a,l)};x(E,a=>{e(T)&&e(_)&&a(U)})}var X=h(E,2);{var B=a=>{var l=ye(),d=h(v(l),4);c(l),W("click",d,j),r(a,l)},H=a=>{var l=O(),d=C(l);{var D=f=>{var b=be();le(2),r(f,b)},u=f=>{var b=O(),S=C(b);{var k=M=>{var V=we();r(M,V)};x(S,M=>{e(p),q(()=>e(p).length===0)&&M(k)},!0)}r(f,b)};x(d,f=>{e(Z)==!1&&e(T)&&!e(y)?f(D):f(u,!1)},!0)}r(a,l)};x(X,a=>{e(T)?a(H,!1):a(B)})}c(z),r(Q,z),re()}export{We as component};
