import"../chunks/DsnmJJEf.js";import{i as K}from"../chunks/DwySfQog.js";import{w as $,x as ee,y as te,z as ae,A as g,B as v,C as se,a as e,b as a,m as f,D as n,F as m,G as l,I as k,J as re,K as I,L as N,M as W,N as A,O as q,P as oe}from"../chunks/DS3f_Bk2.js";import{i as M}from"../chunks/BFjWWJtm.js";import{e as ne,i as le,b as ie,h as ce}from"../chunks/D31jsGsz.js";import{b as ve}from"../chunks/Bx8IaSEj.js";var me=g("<option> </option>"),pe=g('<p class="result-text svelte-1eaotym"> </p> <p class="text"><span class="response-text svelte-1eaotym"><!></span></p>',1),_e=g(`<div class="quiz-screen"><p class="other-text svelte-1eaotym">This is a "scientific version" of a Taylor's verse:</p> <p> </p> <p class="other-text svelte-1eaotym">What song is this?</p> <select class="select-song svelte-1eaotym"><option disabled selected>Select a song</option><!></select> <button class="try-again-btn svelte-1eaotym">Try another</button> <div class="answer svelte-1eaotym"><button class="answer-btn svelte-1eaotym">Show answer</button></div> <!></div>`),de=g('<div class="result-screen svelte-1eaotym"><p class="result-text svelte-1eaotym">Yessss!</p> <img src="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExNmUybWRtOW1mam04Y3BxM3pjZzRnc2Zpb3RnOWQ2Y2twaHRncmdrMCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/Y3EIwTKTeL1rEyc2ZA/giphy.gif" alt="" width="380"/> <button class="try-again-btn end svelte-1eaotym">Try another</button></div>'),ue=g(`<p class="result-text svelte-1eaotym">That's not quite right</p> <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExcndlbmwwNG92MDZoaWYyNDNhaDkyZ3R0anZiaGNqYTM5OXVuYTE3eCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/3otWpAMUG1n5CHSVtm/giphy.gif" alt="incorrect image" width="380"/>`,1),fe=g('<div class="loading"><p>Loading quiz...</p></div>'),ge=g('<main class="svelte-1eaotym"><!> <!></main>');function Me(O,Q){$(Q,!1);const R=f();let i=f([]),s=f(null),Y=f(),p=f(""),b=f(!0),j=f(!1);function z(){if(a(Y,!0),a(j,!1),e(i).length===0)return null;const t=Math.floor(Math.random()*e(i).length);return a(s,e(i)[t]),a(b,!0),a(p,""),e(s).transformed}function F(t){a(p,t.target.value),a(Y,e(s).song_title===e(p)),e(Y)&&(a(b,!1),a(p,""))}function L(){a(j,!0)}ee(async()=>{try{const t=await fetch(`${ve}/tay_to_ipcc.json`);a(i,await t.json()),z()}catch(t){console.error("Failed to load quiz data:",t)}}),te(()=>e(i),()=>{a(R,e(i).length>0?[...new Set(e(i).map(t=>t.song_title||"Unknown Title"))]:[])}),ae(),K();var D=ge(),C=n(D);{var P=t=>{var r=_e(),_=m(n(r),2),S=n(_,!0);l(_);var d=m(_,4);k(()=>{e(p),re(()=>{e(R)})});var o=n(d);o.value=o.__value="";var h=m(o);ne(h,1,()=>e(R),le,(u,y)=>{var c=me(),G=n(c,!0);l(c);var T={};k(()=>{I(G,e(y)),T!==(T=e(y))&&(c.value=(c.__value=e(y))??"")}),v(u,c)}),l(d);var Z=m(d,2),w=m(Z,2),x=n(w);l(w);var V=m(w,2);{var H=u=>{var y=pe(),c=q(y),G=n(c,!0);l(c);var T=m(c,2),E=n(T),J=n(E);ce(J,()=>(e(s),N(()=>e(s).item.replace(/\n/g,"<br>")))),l(E),l(T),k(()=>I(G,(e(s),N(()=>e(s).song_title)))),v(u,y)};M(V,u=>{e(j)&&u(H)})}l(r),k(()=>I(S,(e(s),N(()=>e(s).transformed)))),W("change",d,F),ie(d,()=>e(p),u=>a(p,u)),W("click",Z,z),W("click",x,L),v(t,r)};M(C,t=>{e(b)&&e(s)&&t(P)})}var U=m(C,2);{var X=t=>{var r=de(),_=m(n(r),4);l(r),W("click",_,z),v(t,r)},B=t=>{var r=A(),_=q(r);{var S=o=>{var h=ue();oe(2),v(o,h)},d=o=>{var h=A(),Z=q(h);{var w=x=>{var V=fe();v(x,V)};M(Z,x=>{e(i),N(()=>e(i).length===0)&&x(w)},!0)}v(o,h)};M(_,o=>{e(Y)==!1&&e(b)?o(S):o(d,!1)},!0)}v(t,r)};M(U,t=>{e(b)?t(B,!1):t(X)})}l(D),v(O,D),se()}export{Me as component};
