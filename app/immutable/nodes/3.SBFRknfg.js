import"../chunks/DsnmJJEf.js";import{i as F}from"../chunks/gzeJldyk.js";import{w as L,x as P,y as U,z as X,A as h,B as n,C as B,a as e,b as a,m as f,D as _,F as u,G as g,I as W,J as H,K as D,L as R,M as k,N as V,O as G,P as J}from"../chunks/Cn6JHSt5.js";import{i as T}from"../chunks/BYPkzS16.js";import{e as K,i as $,b as ee}from"../chunks/Bpu5bzIj.js";import{b as te}from"../chunks/DCeY_OG6.js";var ae=h("<option> </option>"),se=h(`<div class="quiz-screen"><p class="other-text svelte-1eaotym">This is a "scientific version" of a Taylor's verse:</p> <p> </p> <p class="other-text svelte-1eaotym">What song is this?</p> <select class="select-song svelte-1eaotym"><option disabled selected>Select a song</option><!></select> <button class="try-again-btn svelte-1eaotym">Try another</button></div>`),oe=h('<div class="result-screen svelte-1eaotym"><p class="result-text svelte-1eaotym">Yessss!</p> <img src="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExNmUybWRtOW1mam04Y3BxM3pjZzRnc2Zpb3RnOWQ2Y2twaHRncmdrMCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/Y3EIwTKTeL1rEyc2ZA/giphy.gif" alt="" width="380"/> <button class="try-again-btn end svelte-1eaotym">Try another</button></div>'),re=h(`<p class="result-text svelte-1eaotym">That's not quite right</p> <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExcndlbmwwNG92MDZoaWYyNDNhaDkyZ3R0anZiaGNqYTM5OXVuYTE3eCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/3otWpAMUG1n5CHSVtm/giphy.gif" alt="incorrect image" width="380"/>`,1),ne=h('<div class="loading"><p>Loading quiz...</p></div>'),ie=h('<main class="svelte-1eaotym"><!> <!></main>');function fe(I,S){L(S,!1);const M=f();let r=f([]),i=f(null),x=f(),l=f(""),y=f(!0);function w(){if(a(x,!0),e(r).length===0)return null;const t=Math.floor(Math.random()*e(r).length);return a(i,e(r)[t]),console.log(e(i)),a(y,!0),a(l,""),e(i).transformed}function q(t){a(l,t.target.value),a(x,e(i).song_title===e(l)),e(x)&&(a(y,!1),a(l,""))}P(async()=>{try{const t=await fetch(`${te}/tay_to_ipcc.json`);a(r,await t.json()),w()}catch(t){console.error("Failed to load quiz data:",t)}}),U(()=>e(r),()=>{a(M,e(r).length>0?[...new Set(e(r).map(t=>t.song_title||"Unknown Title"))]:[])}),X(),F();var Y=ie(),j=_(Y);{var C=t=>{var s=se(),c=u(_(s),2),Z=_(c,!0);g(c);var v=u(c,4);W(()=>{e(l),H(()=>{e(M)})});var o=_(v);o.value=o.__value="";var d=u(o);K(d,1,()=>e(M),$,(b,m)=>{var p=ae(),A=_(p,!0);g(p);var z={};W(()=>{D(A,e(m)),z!==(z=e(m))&&(p.value=(p.__value=e(m))??"")}),n(b,p)}),g(v);var N=u(v,2);g(s),W(()=>D(Z,(e(i),R(()=>e(i).transformed)))),k("change",v,q),ee(v,()=>e(l),b=>a(l,b)),k("click",N,w),n(t,s)};T(j,t=>{e(y)&&e(i)&&t(C)})}var E=u(j,2);{var O=t=>{var s=oe(),c=u(_(s),4);g(s),k("click",c,w),n(t,s)},Q=t=>{var s=V(),c=G(s);{var Z=o=>{var d=re();J(2),n(o,d)},v=o=>{var d=V(),N=G(d);{var b=m=>{var p=ne();n(m,p)};T(N,m=>{e(r),R(()=>e(r).length===0)&&m(b)},!0)}n(o,d)};T(c,o=>{e(x)==!1&&e(y)?o(Z):o(v,!1)},!0)}n(t,s)};T(E,t=>{e(y)?t(Q,!1):t(O)})}g(Y),n(I,Y),B()}export{fe as component};
